{% extends 'base.html' %}

{% load static %}

{% block title %}
	ToolBoard: {{ self.title }}
{% endblock %}

{% block extra_css %}
	<!-- FULLCALENDAR: Calendar and scheduler -->
	<link rel="stylesheet" href="{% static 'plugins/fullcalendar/custom_calendar.css' %}"/>
  	<link rel="stylesheet" href="{% static 'plugins/fullcalendar/fullcalendar.min.css' %}"/>
  	<link rel="stylesheet" href="{% static 'plugins/fullcalendar/scheduler.min.css' %}"/> 
{% endblock %}

{% block content %}
    <div class="row">
      <div class="col-sm-12 content">
        <div class="dashhead">
          <div class="dashhead-titles">
            <h1 class="dashhead-title">{{ page.name }}</h1>
            <h4 class="dashhead-subtitle">{{ page.module.tool }}</h4>
          </div>
          <div class="btn-group m-l-lg m-t-xs">
            <button type="button" class="btn btn-primary-outline" data-toggle="modal" data-target="#taskmodal">
              <span class="icon icon-pencil"></span> 
              Add Task 
            </button>
          </div>
        </div>
        <hr class="m-b-0 m-t-xs">
	    <div class="dashhead pull-right">
	      <div class="dashhead-titles">
	    	<h2 class="dashhead-title m-t-0">
	    		<a data-toggle="collapse" data-target="#collapse-info" class="collapsor">
	    		</a>
	    	</h2>
	      </div>
	    </div>
        <div class="row collapse in" id="collapse-info">
          <div class="col-md-4">
            <h4>{{ page.name }}</h4>
            <p>
              {{ page.description }}
            </p>
          </div>
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-4">   
                <h4>Start datum</h4>
                <div class="input-with-icon dashhead-toolbar-item">
                  <input type="text" value="01/01/15&emsp;15u00" class="form-control">
                  <span class="icon icon-calendar"></span>
                </div>
                <br><br>
                <h4>Geplande einddatum</h4>
                <div class="input-with-icon dashhead-toolbar-item">
                  <input type="text" value="01/01/15&emsp;18u00" class="form-control">
                  <span class="icon icon-calendar"></span>
                </div>
                <br><br>
              </div>
              <div class="col-md-4">
                <h4>Owner</h4>
                <p>
                  De verantwoordelijke
                </p>
                <br> 
                <div class="checkbox custom-control custom-checkbox">
                  <label>
                    <input type="checkbox">
                    <span class="custom-control-indicator"></span>
                    Reservatie OK?
                  </label>
                </div>
              </div>

            </div>
          </div>
        </div>
        <div class="dashhead m-t">
          <div class="dashhead-titles">
	    	<h2 class="dashhead-title">Timeline
	    		<a data-toggle="collapse" data-target="#collapse-timeline" class="collapsor">
	    		</a>
	    	</h2>
          </div>
        </div>

        <hr class="m-t-0 m-b-sm">
        <div class="row collapse in" id="collapse-timeline">
        	<div class="col-xs-12">
        		<div id="calendar"></div>
        	</div>
        </div>
      </div>
    </div>
{% endblock %}

{% block extra_js %}
	{{ block.super }}
	<!-- MOMENT: Datetime representations-->
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"></script>
	<!-- FULLCALENDAR: Calendar and scheduler -->
	<script type="text/javascript" src="{% static 'plugins/fullcalendar/fullcalendar.min.js' %}"></script>
  	<script type="text/javascript" src="{% static 'plugins/fullcalendar/scheduler.min.js' %}"></script>


	<script>
   		$(function() { // dom ready
	      $('#calendar').fullCalendar({
	        schedulerLicenseKey: 'GPL-My-Project-Is-Open-Source',
	        resourceAreaWidth: 140,
	        defaultDate: '2016-08-08',
	        editable: true,
	        //aspectRatio: 4.35,
	        contentHeight: 32*8, 
	        eventOverlap: false,
	        scrollTime: '00:00',
	        header: {
	          left: 'promptResource today prev,next',
	          left: null,
	          center: 'title',
	          //right: 'timelineDay,timelineThreeDays,timelineTenDays,month',
	          //right: null 
	          right: 'timelineDay,timelineWW,timeline2WW'
	        },
	        customButtons: {
	        },
	        defaultView: 'timelineDay',
	        views: {
	          timelineDay: {
	            buttonText: 'Today',
	            slotDuration: '01:00',
	            duration: {days: 7 }
	          },
	          timelineWW: {
	            type: 'timeline',
	            slotDuration: '04:00',
	            duration: { days: 7 }
	          },
	          timeline2WW: {
	            type: 'timeline',
	            slotDuration: '08:00',
	            duration: { days: 14 }
	          }
	        },
	        resourceLabelText: 'Owner',
	        resources: '/api/resources/event/9',
	        events: '/api/tasks/event/9/', /* events list afkomstig van url */
	        eventClick: function(event) {

	          $('#calendartaskmodal').modal();
	            $('#calendartasktitle').text(event.resourceId);
	 
	          }
	      });
	    });
  	</script>
{% endblock %}